{"version":3,"sources":["ng://view-more-directive/app/app.component.ts","ng://view-more-directive/app/view-more.directive.ts","ng://view-more-directive/app/app.module.ts"],"names":["AppComponent","http","this","name","showReadmore","prototype","ngOnInit","console","log","formData","FormData","append","options","headers","HttpHeaders","set","post","subscribe","res","showMore","show","Component","args","selector","template","HttpClient","ViewMoreDirective","elRef","EventEmitter","toggleShowMore","element","nativeElement","ngOnChanges","changes","viewHeight","offsetHeight","ngAfterViewChecked","actualHeight","isInsertedViewMoreBtn","para","document","createElement","span","textNode","createTextNode","appendChild","setAttribute","parentNode","insertBefore","nextSibling","toggleEventOnViewMore","createdStyleTag","_this","textContent","style","animationDirection","addEventListener","classList","remove","getElementById","innerHTML","emit","add","ngOnDestroy","Directive","ElementRef","Input","Output","AppModule","NgModule","imports","declarations","bootstrap","exports"],"mappings":"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","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\n\n@Component({\n  selector: 'my-app',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent implements OnInit {\n  name = 'hi';\n  showReadmore: boolean = false;\n  constructor(private http: HttpClient) {\n  }\n  ngOnInit() {\n    console.log('height equal');\n    const data = {\n      name: 'vaibhav',\n      email: 'test@test.com'\n    }\n    const formData = new FormData();\n    formData.append('name', 'vaibhav');\n    formData.append('email', 'test@test.com');\n    const url = 'http://192.168.15.160:8000/api/reg';\n    const options = {\n      headers: new HttpHeaders().set('Content-Type', 'application/x-www-form-urlencoded')\n    };\n    this.http.post(url, formData, options).subscribe(res => {\n      console.log('res', res);\n    });\n  }\n  showMore(show: boolean) {\n    this.showReadmore = show;\n    console.log(show);\n  }\n}\n","import { Directive, ElementRef, OnInit, Output, Input, EventEmitter, OnDestroy, AfterViewChecked, SimpleChanges } from '@angular/core';\n\n@Directive({\n  selector: '[view-more]'\n})\nexport class ViewMoreDirective implements OnInit, AfterViewChecked, OnDestroy {\n  private element: HTMLInputElement;\n  @Input() viewHeight: number;\n  @Output() showMore = new EventEmitter<boolean>()\n  toggleShowMore = false;\n  actualHeight: number;\n  private isInsertedViewMoreBtn = false;\n  constructor(private elRef: ElementRef) {\n    //elRef will get a reference to the element where\n    //the directive is placed\n    this.element = elRef.nativeElement;\n  }\n  ngOnChanges(changes: SimpleChanges) {\n    // console.log('changes',changes);\n  }\n  ngOnInit() {\n    console.log('height equal', this.viewHeight, this.element.offsetHeight);\n  }\n  ngAfterViewChecked() {\n    this.actualHeight = this.element.offsetHeight + 10;\n    if (!this.isInsertedViewMoreBtn && (this.element.offsetHeight > this.viewHeight)) {\n      let btnName = 'view More...';\n      console.log('height equal');\n\n      let para = document.createElement(\"p\");\n      let span = document.createElement(\"span\");\n      let textNode = document.createTextNode(`${ btnName }`);\n      span.appendChild(textNode);\n      para.appendChild(span);\n      para.setAttribute(`style`, `text-align: right;`);\n      span.setAttribute(`id`, `text_view`);\n      span.setAttribute('style', 'cursor:pointer;')\n      this.element.parentNode.insertBefore(para, this.element.nextSibling)\n      this.toggleEventOnViewMore(span);\n      this.isInsertedViewMoreBtn = true;\n    }\n  }\n  toggleEventOnViewMore(element: HTMLElement) {\n    this.element.setAttribute(\n      `style`,\n      `overflow: hidden;\n    height: ${this.viewHeight }px;\n    transition: height 1s ease;\n    `\n    );\n    let createdStyleTag: HTMLStyleElement;\n    createdStyleTag = document.createElement(\"style\");\n    createdStyleTag.setAttribute(`id`, `style_view_more`);\n    createdStyleTag.textContent = `.view_more {\n      height: ${this.actualHeight }px !important;\n    }  \n`;\n    this.element.style.animationDirection = \"\";\n    // document.body.appendChild(createdStyleTag);\n    this.element.appendChild(createdStyleTag);\n    element.addEventListener('click', () => {\n\n      if (this.toggleShowMore) {\n        console.log('viewless');\n        this.element.classList.remove(\"view_more\");\n        document.getElementById('text_view').innerHTML = 'view more...';\n        this.toggleShowMore = !this.toggleShowMore;\n        this.showMore.emit(false);\n      } else {\n        console.log('viewmore');\n        document.getElementById('text_view').innerHTML = 'view less...';\n        this.element.classList.add(\"view_more\");\n        this.toggleShowMore = !this.toggleShowMore;\n        this.showMore.emit(true);\n      }\n    })\n  }\n\n  ngOnDestroy() {\n    if (document.getElementById('style_view_more')) {\n      document.getElementById('style_view_more').remove();\n    }\n  }\n}","import { NgModule } from '@angular/core';\n\nimport { AppComponent } from './app.component';\nimport { ViewMoreDirective } from './view-more.directive';\n\n@NgModule({\n  imports:[],\n  declarations: [ AppComponent,ViewMoreDirective ],\n  bootstrap: [AppComponent],\n  exports:[ViewMoreDirective]\n})\nexport class AppModule { }\n"]}